<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enquiry Form</title>

    <!-- Google reCAPTCHA -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <style>
        /* Page center */
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
            margin: 0;
            padding: 0;
        }

        /* Form container */
        .form-container {
            max-width: 400px;
            margin: 40px auto;
            background: #ffffff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Heading */
        .form-container h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        /* Labels */
        .form-container label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: #555;
        }

        /* Required star */
        .required {
            color: red;
        }

        /* Inputs & textarea */
        .form-container input,
        .form-container textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        /* Focus effect */
        .form-container input:focus,
        .form-container textarea:focus {
            border-color: #2563eb;
            outline: none;
        }

        /* Textarea */
        .form-container textarea {
            resize: vertical;
            min-height: 90px;
        }

        /* Button */
        .form-container button {
            width: 100%;
            background: #2563eb;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Hover effect */
        .form-container button:hover {
            background: #1e40af;
        }

        /* Mobile responsive */
        @media (max-width: 480px) {
            .form-container {
                margin: 20px;
                padding: 20px;
            }
        }
    </style>
</head>

<body>

<div class="form-container">
    <form action="submit_enquiry.php" method="POST">

        <h2>Enquiry Form</h2>

        <label>Name <span class="required">*</span></label>
        <input type="text" name="name" required>

        <label>Email <span class="required">*</span></label>
        <input type="email" name="email" required>

        <label>Mobile <span class="required">*</span></label>
        <input type="tel"
               name="mobile"
               pattern="[0-9]{10}"
               title="Enter 10 digit mobile number"
               required>

        <!-- Google reCAPTCHA -->
        <div class="g-recaptcha" data-sitekey="6Le-6LdnoVcsAAAAAO7PyLd28GiN4Hr7SHFkGDl7Gmcd"></div>
        <br>

        <button type="submit">Submit</button>

    </form>
</div>

</body>
</html>
<?php
include 'db.php';   // database connection

// 1. Your SECRET key from Google reCAPTCHA
$secretKey = "6LdnoVcsAAAAAFUQWLwhdaBj08bLUFRxMvkqhpgO";

// 2. Get captcha response from form
if (!isset($_POST['g-recaptcha-response'])) {
    die("Captcha not checked");
}

$captchaResponse = $_POST['g-recaptcha-response'];

// 3. Verify captcha with Google
$verifyURL = "https://www.google.com/recaptcha/api/siteverify";

$data = [
    'secret' => $secretKey,
    'response' => $captchaResponse,
    'remoteip' => $_SERVER['REMOTE_ADDR']
];

$options = [
    'http' => [
        'header'  => "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  => 'POST',
        'content' => http_build_query($data)
    ]
];

$context  = stream_context_create($options);
$result = file_get_contents($verifyURL, false, $context);
$response = json_decode($result);

// 4. Check result
if (!$response->success) {
    die("Captcha verification failed");
}
?>
